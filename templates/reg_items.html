<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title style="font-family: Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; height: 100vh;">상품 등록</title>
    <style>
        *{
            margin: 0 auto;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: white;
            margin: 0 auto;
            padding: 0;
            height: 100vh;
        }

        article{
            height: 100%;
            width: 70%;
            margin: 0 auto;
            padding-bottom: 12px;
            text-align: left;
        }

        label {
            font-size: 20px;
            margin-right: 100px;
        }

        .submit-button {
            display: block;
            margin: 20px auto;
            background-color: #F8D57E;
            color: #2D2D2D;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .product-description {
            height: 300px;
            width: 100%;
            resize: vertical;
            border: 1px solid #ccc;
            border-radius: 3px;
        }

        input[type=checkbox] + label {
            display: inline-block;
        }

    </style>
</head>
<body>
    {% include 'header.html' %}

    <section>
        {% block section %}

    
    <article>
        <form method="post" enctype="multipart/form-data" action="/submit_item_post">
            <input type="hidden" name="post_date" value="{{ post_date }}">
            <input type="hidden" name="seller_id" value="{{ seller_id }}">
            <br><br>
            <h3 style="font-family: Arial, sans-serif; font-size: 20px;">상품 이미지</h3>
            <div>
                <label for="img" style="font-family: Arial, sans-serif; font-size: 20px;"></label><br>
                <input type="file" name="file" style="font-family: Arial, sans-serif; font-size: 20px;" onchange="readURL(this);" >
                <br><br>
                <img id="preview" />
            </div>
            <br><br>
            <h3 style="font-family: Arial, sans-serif; font-size: 20px;">글 제목(상품명)</h3>
            <div>
                <label for="name" style="font-family: Arial, sans-serif; font-size: 20px;"></label><br>
                <input type="text" name="name" id="name" required style="font-family: Arial, sans-serif; font-size: 20px; width: 650px; height: 30px;"><br><br>
            </div>
            <br><br><br>
            <h3 style="font-family: Arial, sans-serif; font-size: 20px;">거래 방식</h3>
            <div>
                    <input type="checkbox" id="cb1" name="transaction" value="dir">
                    <label for="cb1">직거래</label>
                    <input type="checkbox" id="cb2" name="transaction" value="pars">
                    <label for="cb2">택배거래</label>
                    <input type="checkbox" id="cb3" name="transaction" value="box">
                    <label for="cb3">비대면상자</label>
            </div>
            <br><br><br>
            <h3 style="font-family: Arial, sans-serif; font-size: 20px;">가격 방식</h3>
            <div>
                <input type="radio" name="trade_type" value="auction" checked onchange="toggleTradeType()">
                <label for="auction">경매</label>
                <input type="radio" name="trade_type" value="regular" onchange="toggleTradeType()">
                <label for="regular">일반</label>
            </div>
            <div id="regular_price_field" style="display:none;">
                <label for="regular_price" style="font-family: Arial, sans-serif; font-size: 20px;">가격</label><br>
                <input type="number" name="regular_price" id="regular_price" required style="font-family: Arial, sans-serif; font-size: 20px; width: 650px; height: 30px;"><br><br>
            </div>

            <div id="auction-fields" style="display:none;">
                <label for="end_date">경매 종료일</label><br>
                <input type="date" name="end_date" required><br><br>
            
                <label for="min_price">최소 가격</label><br>
                <input type="number" name="min_price" required><br><br>
            
                <label for="max_price">최대 가격</label><br>
                <input type="number" name="max_price" required><br><br>
            </div>

            <script>
                function toggleTradeType() {
                    var auctionFields = document.getElementById('auction-fields');
                    var regularPriceField = document.getElementById('regular_price_field');
                    var tradeType = document.querySelector('input[name="trade_type"]:checked').value;
            
                    if (tradeType === 'auction') {
                        auctionFields.style.display = 'block';
                        regularPriceField.style.display = 'none';
                        enableFields(auctionFields);
                        disableFields(regularPriceField);
                    } else {
                        auctionFields.style.display = 'none';
                        regularPriceField.style.display = 'block';
                        enableFields(regularPriceField);
                        disableFields(auctionFields);
                    }
                }
            
                function enableFields(container) {
                    var inputs = container.querySelectorAll('input, select, textarea');
                    inputs.forEach(function (input) {
                        input.removeAttribute('disabled');
                    });
                }
            
                function disableFields(container) {
                    var inputs = container.querySelectorAll('input, select, textarea');
                    inputs.forEach(function (input) {
                        input.setAttribute('disabled', 'disabled');
                    });
                }
                
                function getCurrentTime() {
                    return new Date().toISOString();
                }

                function addServerTimeToForm() {
                    var currentTime = getCurrentTime();
                    var timeInput = document.createElement("input");
                    timeInput.setAttribute("type", "hidden");
                    timeInput.setAttribute("name", "server_time");
                    timeInput.setAttribute("value", currentTime);

                    var form = document.querySelector("form");
                    form.appendChild(timeInput);
                }
                
                const currentDateTime = new Date();
                const year = currentDateTime.getFullYear();
                const month = String(currentDateTime.getMonth() + 1).padStart(2, '0');
                const date = String(currentDateTime.getDate()).padStart(2, '0');
                const hour = String(currentDateTime.getHours()).padStart(2, '0');
                const minutes = String(currentDateTime.getMinutes()).padStart(2, '0');

                const formattedDateTime = `${year}-${month}-${date} ${hour}:${minutes}`;
                document.getElementById("post_date").value = formattedDateTime;
                
                document.addEventListener('DOMContentLoaded', function () {
                    toggleTradeType();
                });
            </script>
            <br><br><br><br>
            <h3 style="font-family: Arial, sans-serif; font-size: 20px;">상세 설명</h3>
            <label for="product_description" style="font-family: Arial, sans-serif; font-size: 20px;"></label>
            <textarea id="product_description" name="product_description" rows="15" cols="50" required style="font-family: Arial, sans-serif; font-size: 20px;" placeholder="(20-500자)"></textarea>
            <br>
            
            <button class="submit-button" type="submit" style="font-family: Arial, sans-serif; font-size: 20px;">상품 등록</button>
        </form>
    </article>
    {% endblock section %}
</section>

{% include 'footer.html' %}

</body>
</html>
